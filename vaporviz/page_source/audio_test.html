<!DOCTYPE html>
<html>
<head>
  <title>Audio Test</title>

  <link rel="stylesheet" href="/static/bootstrap-3.1.1/css/bootstrap.css"/>
  <link rel="stylesheet" href="/static/bootstrap-3.1.1/css/bootstrap-theme.css"/>

  <script src="/static/jquery-1.11.1.min.js"></script>
  <script src="/static/bootstrap-3.1.1/js/bootstrap.js"></script>

  <script src="/static/wavesurfer/wavesurfer.js"></script>
  <script src="/static/wavesurfer/webaudio.js"></script>
  <script src="/static/wavesurfer/webaudio.buffer.js"></script>
  <script src="/static/wavesurfer/webaudio.media.js"></script>
  <script src="/static/wavesurfer/drawer.js"></script>
  <script src="/static/wavesurfer/drawer.canvas.js"></script>

  <script src="/www/data_handler.js"></script>
  <script src="/www/waveform_visualizer.js"></script>

  <script>
   function addPseudotermList(waveformVisualizerID) {
     send = {};
     send.dataset = 'buckeye'; // HARDCODE
     send.count = 10; //TODO: pull from some element
     console.log(send)

     $.ajaxSetup({
       contentType: "application/json; charset=utf-8",
       dataType: "json"
     });

     $.ajax({
       url: "/find_pseudoterms",
       type: "POST",
       data: JSON.stringify(send),
       error: function(xhr, error) {
         alert('Error!  Status = ' + xhr.status + ' Message = ' + error);
       },
       success: function(data) {
         for (var i in data) {
           var pseudoterm_div = $('<div>').html("Pseudoterm ID: " + data[i].native_display);
           addControlsAndLoadAudioForWaveformVisualizer(
             pseudoterm_div,
             waveformVisualizerID,
             getURLforPseudotermWAV(data[i]['_id']));
           $('#pseudoterm_list').append(pseudoterm_div);
         }
       }
     });
   }

   $(document).ready(function() {
     addWaveformVisualizer('waveform_div');

     addPseudotermList('waveform_div');
   });
  </script>
</head>
<body>
  <div class="container" style="padding-top: 2em; padding-bottom; 2em;">

    <div id="waveform_div"></div>

    <hr />

    <!--
    <div>
      <h2>Audio Event - dynamically created clip</h2>
      <audio id="ae_player">
        <p>Your browser does not support the audio element</p>
      </audio>
      <button onclick="playAudioEvent('ae_player', '5360d6c0fedd526522c43935');">Play</button>
    </div>

    <div>
      <audio id="pt_player">
        <p>Your browser does not support the audio element</p>
      </audio>
      <button onclick="playPseudoterm('pt_player', '5360d6c0fedd526522c43934');">Play</button>
    </div>
    -->

    <h2>Pseudoterm - dynamically created clip</h2>

    <div id="pseudoterm_list">
    </div>

    <!--
    <div>
      <h2>Utterance - static file</h2>
      <audio id="utt_player">
        <p>Your browser does not support the audio element</p>
      </audio>
      <button onclick="playUtterance('utt_player', '5360d6c0fedd526522c43933');">Play</button>

      <audio src="/audio/utterance/5360d6c0fedd526522c43933.wav" controls>
        <p>Your browser does not support the audio element</p>
      </audio>
    </div>
    -->

  </div>

</body>
</html>
